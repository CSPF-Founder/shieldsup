import{b as l,c as i,r as p,h as d,s as r}from"./main-BCf5cIOF.js";let n=null;const o=15*1e3;l(function(){n=setInterval(c,o)});function c(){const s=document.getElementById("update-button"),a=document.getElementById("update-status"),u=document.getElementById("last-updated");i("/update/status",{method:"GET"}).then(t=>(t.redirected&&p(t.redirect),t.json().then(e=>({ok:t.ok,data:e})))).then(({ok:t,data:e})=>{if(d(),!t)throw new Error(e.error||"Error occurred");e.yet_to_update!==void 0&&e.yet_to_update?s.disabled=!1:e.status!==void 0?e.status==0?(s.disabled=!0,a.innerHTML="Update Status: <span class='ms-2 px-2 badge bg-warning'>Updating...</span>"):e.status==1?(s.disabled=!1,a.innerHTML="Update Status: <span class='ms-2 px-2 badge bg-success'>Updated</span>",u.innerHTML="Last Updated: <span class='ms-2'>"+e.last_updated_time+"</span>",clearInterval(n)):e.status==2&&(s.disabled=!1,a.innerHTML="Update Status: <span class='ms-2 px-2 badge bg-danger'>Update Failed</span>",clearInterval(n)):(s.disabled=!1,r("Unable to check the update status"),clearInterval(n))}).catch(t=>{s.disabled=!1,d(),r(t.message)})}l(function(){const s=document.getElementById("update-button"),a=document.getElementById("update-status");s.addEventListener("click",function(u){u.preventDefault(),s.disabled=!0,i("/update/start",{method:"POST"}).then(t=>t.json().then(e=>({ok:t.ok,data:e}))).then(({ok:t,data:e})=>{if(d(),!t)throw new Error(e.error||"Error occurred");e.success?(a.innerHTML="Update Status: <span class='ms-2 px-2 badge bg-warning'>Updating...</span>",n=setInterval(c,o)):(s.disabled=!1,s.innerHTML="Update",r(e.error))}).catch(t=>{d(),r(t.message),s.disabled=!1})})});
